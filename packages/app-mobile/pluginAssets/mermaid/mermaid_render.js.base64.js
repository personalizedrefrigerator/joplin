module.exports = `LyogZ2xvYmFsIG1lcm1haWQgKi8KCmZ1bmN0aW9uIG1lcm1haWRSZWFkeSgpIHsKCS8vIFRoZSBNZXJtYWlkIGluaXRpYWxpemF0aW9uIGNvZGUgcmVuZGVycyB0aGUgTWVybWFpZCBjb2RlIHdpdGhpbiBhbnkgZWxlbWVudCB3aXRoIGNsYXNzICJtZXJtYWlkIiBvcgoJLy8gSUQgIm1lcm1haWQiLiBIb3dldmVyIGluIHNvbWUgY2FzZXMgc29tZSBlbGVtZW50cyBtaWdodCBoYXZlIHRoaXMgSUQgYnV0IG5vdCBiZSBNZXJtYWlkIGNvZGUuCgkvLyBGb3IgZXhhbXBsZSwgTWFya2Rvd24gY29kZSBsaWtlIHRoaXM6CgkvLwoJLy8gICAgICMgTWVybWFpZAoJLy8KCS8vIFdpbGwgZ2VuZXJhdGUgdGhpcyBIVE1MOgoJLy8KCS8vICAgICA8aDEgaWQ9Im1lcm1haWQiPk1lcm1haWQ8L2gxPgoJLy8KCS8vIEFuZCB0aGF0J3MgZ29pbmcgdG8gbWFrZSB0aGUgbGliIHNldCB0aGUgYG1lcm1haWRgIG9iamVjdCB0byB0aGUgSDEgZWxlbWVudC4KCS8vIFNvIGJlbG93LCB3ZSBkb3VibGUtY2hlY2sgdGhhdCB3aGF0IHdlIGhhdmUgcmVhbGx5IGlzIGFuIGluc3RhbmNlIG9mIHRoZSBsaWJyYXJ5LgoJcmV0dXJuIHR5cGVvZiBtZXJtYWlkICE9PSAndW5kZWZpbmVkJyAmJiBtZXJtYWlkICE9PSBudWxsICYmIHR5cGVvZiBtZXJtYWlkID09PSAnb2JqZWN0JyAmJiAhIW1lcm1haWQuaW5pdGlhbGl6ZTsKfQoKY29uc3QgaXNEYXJrTW9kZSA9ICgpID0+IHsKCS8vIElmIGFueSBtZXJtYWlkIGVsZW1lbnRzIGFyZSBtYXJrZWQgYXMgcmVxdWlyaW5nIGRhcmsgbW9kZSwgcmVuZGVyICphbGwqCgkvLyBtZXJtYWlkIGVsZW1lbnRzIGluIGRhcmsgbW9kZS4KCXJldHVybiAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXJtYWlkLmpvcGxpbi0tbWVybWFpZC11c2UtZGFyay10aGVtZScpOwp9OwoKY29uc3QgaW5pdEV4cG9ydEJ1dHRvbnMgPSAoKSA9PiB7Cgljb25zdCBleHBvcnRCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lcm1haWQtZXhwb3J0LWdyYXBoID4gYnV0dG9uJyk7Cglmb3IgKGNvbnN0IGJ1dHRvbiBvZiBleHBvcnRCdXR0b25zKSB7CgkJYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7CgkJCWNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGJ1dHRvbi5wYXJlbnRFbGVtZW50OwoJCQljb25zdCBtZXJtYWlkRWxlbSA9IGJ1dHRvbkNvbnRhaW5lci5uZXh0RWxlbWVudFNpYmxpbmc7CgoJCQljb25zdCByaWdodENsaWNrRXZlbnQgPSBuZXcgUG9pbnRlckV2ZW50KCdjb250ZXh0bWVudScsIHsgYnViYmxlczogdHJ1ZSB9KTsKCQkJcmlnaHRDbGlja0V2ZW50LnRhcmdldCA9IG1lcm1haWRFbGVtOwoJCQltZXJtYWlkRWxlbS5kaXNwYXRjaEV2ZW50KHJpZ2h0Q2xpY2tFdmVudCk7CgkJfTsKCX0KfTsKCmZ1bmN0aW9uIG1lcm1haWRJbml0KCkgewoJaWYgKG1lcm1haWRSZWFkeSgpKSB7CgkJY29uc3QgbWVybWFpZFRhcmdldE5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbWVybWFpZCcpOwoKCQl0cnkgewoJCQljb25zdCBkYXJrTW9kZSA9IGlzRGFya01vZGUoKTsKCQkJbWVybWFpZC5pbml0aWFsaXplKHsKCQkJCS8vIFdlIGNhbGwgbWVybWFpZC5ydW4gb3Vyc2VsdmVzIHdoZW5ldmVyIHRoZSBub3RlIHVwZGF0ZXMuIERvbid0IGF1dG8tc3RhcnQKCQkJCXN0YXJ0T25Mb2FkOiBmYWxzZSwKCgkJCQlkYXJrTW9kZSwKCQkJCXRoZW1lOiBkYXJrTW9kZSA/ICdkYXJrJyA6ICdkZWZhdWx0JywKCQkJfSk7CgkJCW1lcm1haWQucnVuKHsKCQkJCW5vZGVzOiBtZXJtYWlkVGFyZ2V0Tm9kZXMsCgkJCX0pOwoJCX0gY2F0Y2ggKGVycm9yKSB7CgkJCWNvbnNvbGUuZXJyb3IoJ01lcm1haWQgZXJyb3InLCBlcnJvcik7CgkJfQoKCQkvLyBSZXNldHRpbmcgZWxlbWVudHMgc2l6ZSAtIHNlZSBtZXJtYWlkLnRzCgkJZm9yIChjb25zdCBlbGVtZW50IG9mIG1lcm1haWRUYXJnZXROb2RlcykgewoJCQllbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnOwoJCX0KCgkJaW5pdEV4cG9ydEJ1dHRvbnMoKTsKCX0KfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignam9wbGluLW5vdGVEaWRVcGRhdGUnLCAoKSA9PiB7CgltZXJtYWlkSW5pdCgpOwp9KTsKCmNvbnN0IGluaXRJSURfID0gc2V0SW50ZXJ2YWwoKCkgPT4gewoJY29uc3QgaXNSZWFkeSA9IG1lcm1haWRSZWFkeSgpOwoJaWYgKGlzUmVhZHkpIHsKCQljbGVhckludGVydmFsKGluaXRJSURfKTsKCQltZXJtYWlkSW5pdCgpOwoJfQp9LCAxMDApOwoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsKCS8vIEluIHNvbWUgZW52aXJvbm1lbnRzLCB3ZSBjYW4gbG9hZCBNZXJtYWlkIGltbWVkaWF0ZWx5IChlLmcuIG1vYmlsZSkuCgkvLyBJZiB3ZSBkb24ndCBsb2FkIGl0IGltbWVkaWF0ZWx5IGluIHRoZXNlIGVudmlyb25tZW50cywgTWVybWFpZCBzZWVtcwoJLy8gdG8gaW5pdGlhbGl6ZSBhbmQgYXV0by1ydW4sIGJ1dCB3aXRob3V0IG91ciBjb25maWd1cmF0aW9uIGNoYW5nZXMuCglpZiAobWVybWFpZFJlYWR5KCkpIHsKCQltZXJtYWlkSW5pdCgpOwoJfSBlbHNlIHsKCQljbGVhckludGVydmFsKGluaXRJSURfKTsKCX0KfSk7Cg==`;